<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>KGM Cables - Area Notifications</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Flatpickr (time picker) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />

  <link href="/static/css/style.css" rel="stylesheet" />
</head>
<body>
  <!-- Brand Header -->
  <header class="brand">
    <div class="brand-left">
      <button class="btn btn-outline-light btn-sm sidebar-toggle" data-bs-toggle="offcanvas" data-bs-target="#sidebar" aria-controls="sidebar" title="Open panel">
        <i class="bi bi-list"></i>
      </button>
      <div class="logo-wrap">
        <img src="/static/img/logo.png" alt="KGM Cables" />
      </div>
      <div class="brand-text">
        <h1 class="m-0">KGM Cables</h1>
        <div class="subtitle">Cable TV Messenger</div>
      </div>
    </div>
    <!-- (No header estimate pill anymore) -->
  </header>

  <!-- Collapsible Sidebar (Offcanvas) - starts closed by default -->
  <div class="offcanvas offcanvas-start text-bg-dark sidebar" tabindex="-1" id="sidebar">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title">Settings & Info</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column">
      <div class="sb-section">
        <h6>Pricing</h6>
        <div class="sb-row"><span>Category</span><span id="sbCategory">Utility</span></div>
        <div class="sb-row"><span>Rate</span><span id="sbRate">₹0.00 / delivered</span></div>
      </div>

      <div class="sb-section">
        <h6>Run estimate</h6>
        <div class="sb-row"><span>Recipients</span><span id="sbRecipients">0</span></div>
        <div class="sb-row strong"><span>Total</span><span id="sbTotal">₹0.00</span></div>
      </div>

      <div class="sb-grow"></div>
      <div class="sb-footer">
        <small class="sb-dev">©️reated by:<br/>Arunaggiri Pandian Karunanidhi</small>
      </div>
    </div>
  </div>

  <main class="container">
    <section class="card">
      <div class="grid">
        <div>
          <label for="area">Select Area</label>
          <select id="area"></select>
          <div id="areaCount" class="muted"></div>
        </div>
      </div>
    </section>

    <!-- Options / Composer -->
    <section class="card">
      <!-- Row 1: Segmented control + Language pills -->
      <div class="row w-100 justify-content-between" style="gap:0.75rem">
        <!-- Segmented control (Outage / Restored) -->
        <div class="seg-wrap">
          <input type="radio" class="btn-check" name="msgType" id="msgOutage" value="outage" checked>
          <label class="btn btn-seg" for="msgOutage" data-bs-toggle="tooltip"
                 data-bs-title="Sends a one-way outage alert to the selected area with optional ETA.">
            <i class="bi bi-lightning-charge"></i> Outage
          </label>

          <input type="radio" class="btn-check" name="msgType" id="msgRestored" value="restored">
          <label class="btn btn-seg" for="msgRestored" data-bs-toggle="tooltip"
                 data-bs-title="Sends a one-way notice that service is restored for the selected area.">
            <i class="bi bi-check-circle"></i> Restored
          </label>
        </div>

        <!-- Language pill toggles -->
        <div class="lang-wrap">
          <input type="checkbox" class="btn-check" id="langTamil" autocomplete="off" checked>
          <label class="btn btn-pill" for="langTamil" data-bs-toggle="tooltip" data-bs-title="Include Tamil message">தமிழ்</label>

          <input type="checkbox" class="btn-check" id="langEnglish" autocomplete="off" checked>
          <label class="btn btn-pill" for="langEnglish" data-bs-toggle="tooltip" data-bs-title="Include English message">EN</label>
        </div>
      </div>

      <!-- Row 2: ETA with time pickers + quick picks -->
      <div class="w-100 mt-3">
        <label class="muted strong-label">Estimated downtime (optional)</label>
        <div class="d-flex gap-2 flex-wrap align-items-center">
          <div class="input-group time-group">
            <span class="input-group-text"><i class="bi bi-alarm"></i></span>
            <input id="etaStart" class="form-control timepicker" placeholder="Start time" />
          </div>
          <div class="align-self-center muted">to</div>
          <div class="input-group time-group">
            <span class="input-group-text"><i class="bi bi-alarm"></i></span>
            <input id="etaEnd" class="form-control timepicker" placeholder="End time" />
          </div>
        </div>

        <!-- Quick pick chips -->
        <div class="quick-picks mt-2">
          <button type="button" class="chip" data-pick="plus_30m">+30m</button>
          <button type="button" class="chip" data-pick="plus_1h">+1h</button>
          <button type="button" class="chip" data-pick="plus_2h">+2h</button>
          <button type="button" class="chip" data-pick="slot_14_16">2–4 PM</button>
          <button type="button" class="chip" data-pick="slot_16_18">4–6 PM</button>
          <button type="button" class="chip" data-pick="slot_22_01">10 PM–1 AM</button>
          <button type="button" class="chip danger" data-pick="clear">Clear</button>
        </div>
      </div>

      <!-- Row 3: Dry run switch -->
      <div class="d-flex justify-content-end mt-3">
        <div class="form-check form-switch form-switch-lg">
          <input class="form-check-input" type="checkbox" id="dryRun" checked>
          <label class="form-check-label" for="dryRun">Dry run (preview only)</label>
          <i class="bi bi-question-circle help-icon ms-2"
             data-bs-toggle="tooltip"
             data-bs-title="Preview the message and cost without sending. Disable to send."></i>
        </div>
      </div>
    </section>

    <section class="card">
      <label for="message">Composed Message (editable)</label>
      <textarea id="message" rows="6"></textarea>
      <div class="muted" id="composeHint">
        Auto-composed from your selections; you can still edit by hand.
      </div>
    </section>

    <section class="actions">
      <button id="sendBtn">Send via WhatsApp</button>
    </section>

    <section id="status" class="status"></section>
  </main>

  <!-- JS libs -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <!-- App script -->
  <script src="/static/js/script.js"></script>
</body>
</html>